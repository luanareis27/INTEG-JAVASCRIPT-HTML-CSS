<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Atividade 05 - Integração</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <div class="container py-4">
    <h1 class="text-center mb-4">Atividade 05 - Integração JS, HTML e CSS</h1>

    <!-- Questão 1 -->
    <div class="card mb-4 border-primary">
      <div class="card-header bg-primary text-white">1. Data por Extenso</div>
      <div class="card-body">
        <input type="text" id="dataInput" class="form-control mb-2" placeholder="dd/mm/aaaa">
        <button class="btn btn-primary" onclick="converterData()">Converter</button>
        <p id="dataExtenso" class="mt-2 fw-bold text-primary"></p>
      </div>
    </div>

    <!-- Questão 2 -->
    <div class="card mb-4 border-success">
      <div class="card-header bg-success text-white">2. Simulador de Empréstimo</div>
      <div class="card-body">
        <input type="number" id="valor" class="form-control mb-2" placeholder="Valor do empréstimo">
        <input type="number" id="parcelas" class="form-control mb-2" placeholder="Quantidade de parcelas (1-36)">
        <input type="number" id="juros" class="form-control mb-2" placeholder="Taxa de juros mensal (%)">
        <button class="btn btn-success mb-2" onclick="calcularEmprestimo()">Calcular</button>
        <div id="resultadoEmprestimo" class="fw-bold text-success"></div>
        <table class="table table-bordered mt-2">
          <thead>
            <tr>
              <th>Parcela</th>
              <th>Valor</th>
              <th>Saldo Restante</th>
            </tr>
          </thead>
          <tbody id="tabelaParcelas"></tbody>
        </table>
      </div>
    </div>

    <!-- Questão 3 -->
    <div class="card mb-4 border-warning">
      <div class="card-header bg-warning text-dark">3. Formulário de Consumo</div>
      <div class="card-body">
        <input type="text" id="nomeCliente" class="form-control mb-2" placeholder="Nome do cliente">
        <h6>Bebidas</h6>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="suco"> <label>Suco (R$4.00)</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="refri"> <label>Refrigerante (R$2.50)</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="agua"> <label>Água (R$1.50)</label>
        </div>

        <h6 class="mt-2">Doces/Salgados</h6>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="bolo"> <label>Bolo (R$3.50)</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="pastel"> <label>Pastel (R$3.00)</label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="torta"> <label>Torta (R$4.00)</label>
        </div>

        <button class="btn btn-warning mt-2" onclick="calcularConsumo()">Calcular</button>
        <p id="resultadoConsumo" class="mt-2 fw-bold text-dark"></p>
      </div>
    </div>

    <!-- Questão 4 (QUIZ) - ATUALIZADO -->
    <div class="card mb-4 border-danger">
      <div class="card-header bg-danger text-white">4. Quiz Interativo</div>
      <div class="card-body">
        <form id="quizForm">
          <p>1. Qual é a capital do Brasil?</p>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q1" id="q1_brasilia" value="Brasília">
            <label class="form-check-label" for="q1_brasilia">Brasília</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q1" id="q1_rio" value="Rio de Janeiro">
            <label class="form-check-label" for="q1_rio">Rio de Janeiro</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q1" id="q1_sp" value="São Paulo">
            <label class="form-check-label" for="q1_sp">São Paulo</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q1" id="q1_bh" value="Belo Horizonte">
            <label class="form-check-label" for="q1_bh">Belo Horizonte</label>
          </div>

          <p class="mt-2">2. Quanto é 2 + 2?</p>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q2" id="q2_2" value="2">
            <label class="form-check-label" for="q2_2">2</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q2" id="q2_3" value="3">
            <label class="form-check-label" for="q2_3">3</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q2" id="q2_4" value="4">
            <label class="form-check-label" for="q2_4">4</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q2" id="q2_5" value="5">
            <label class="form-check-label" for="q2_5">5</label>
          </div>

          <p class="mt-2">3. Qual linguagem é usada para estilizar páginas?</p>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q3" id="q3_html" value="HTML">
            <label class="form-check-label" for="q3_html">HTML</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q3" id="q3_css" value="CSS">
            <label class="form-check-label" for="q3_css">CSS</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q3" id="q3_js" value="JavaScript">
            <label class="form-check-label" for="q3_js">JavaScript</label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="q3" id="q3_scss" value="SCSS">
            <label class="form-check-label" for="q3_scss">SCSS</label>
          </div>

          <br>
          <button type="button" class="btn btn-danger mt-2" onclick="corrigirQuiz()">Corrigir</button>
        </form>
        <p id="resultadoQuiz" class="fw-bold mt-2"></p>
      </div>
    </div>

    <!-- Questão 5 -->
    <div class="card mb-4 border-info">
      <div class="card-header bg-info text-white">5. Lista de Tarefas</div>
      <div class="card-body">
        <input type="text" id="tarefaInput" class="form-control mb-2" placeholder="Digite uma tarefa">
        <button class="btn btn-info" onclick="adicionarTarefa()">Adicionar</button>
        <ul id="listaTarefas" class="list-group mt-2"></ul>
      </div>
    </div>
  </div>

<script>
  // Questão 1
  function converterData(){
    let data = document.getElementById("dataInput").value;
    let partes = data.split("/");
    let meses = ["janeiro","fevereiro","março","abril","maio","junho",
                 "julho","agosto","setembro","outubro","novembro","dezembro"];
    if(partes.length !== 3){ alert("Data inválida!"); return; }
    let dia = parseInt(partes[0]), mes = parseInt(partes[1]), ano = parseInt(partes[2]);
    if(isNaN(dia)||isNaN(mes)||isNaN(ano)|| mes<1||mes>12){ alert("Data inválida!"); return; }
    // validação mais precisa
    let dataObj = new Date(ano, mes-1, dia);
    if(dataObj.getDate() !== dia || dataObj.getMonth() !== mes-1 || dataObj.getFullYear() !== ano){
      alert("Data inválida!"); return;
    }
    document.getElementById("dataExtenso").textContent = `${dia} de ${meses[mes-1]} de ${ano}`;
  }

  // Questão 2
  function calcularEmprestimo(){
    let valor = parseFloat(document.getElementById("valor").value);
    let n = parseInt(document.getElementById("parcelas").value);
    let juros = parseFloat(document.getElementById("juros").value)/100;
    if(isNaN(valor)||isNaN(n)||isNaN(juros)||n<1||n>36){ alert("Dados inválidos!"); return; }

    let parcela;
    if(juros === 0){
      parcela = valor / n;
    } else {
      parcela = valor * (juros*Math.pow(1+juros,n))/(Math.pow(1+juros,n)-1);
    }
    let total = parcela * n;
    document.getElementById("resultadoEmprestimo").textContent = 
      `Parcela: R$ ${parcela.toFixed(2)} | Total a pagar: R$ ${total.toFixed(2)}`;

    let saldo = valor;
    let tbody = document.getElementById("tabelaParcelas");
    tbody.innerHTML = "";
    for(let i=1;i<=n;i++){
      let jurosMes = saldo * juros;
      let amort = parcela - jurosMes;
      saldo -= amort;
      if(saldo < 0.01) saldo = 0; // tratar pequena imprecisão
      tbody.innerHTML += `<tr><td>${i}</td><td>R$ ${parcela.toFixed(2)}</td><td>R$ ${saldo.toFixed(2)}</td></tr>`;
    }
  }

  // Questão 3
  function calcularConsumo(){
    let nome = document.getElementById("nomeCliente").value;
    if(!nome){ alert("Informe o nome!"); return; }
    let itens = [];
    let total = 0;
    if(document.getElementById("suco").checked){ itens.push("Suco"); total+=4; }
    if(document.getElementById("refri").checked){ itens.push("Refrigerante"); total+=2.5; }
    if(document.getElementById("agua").checked){ itens.push("Água"); total+=1.5; }
    if(document.getElementById("bolo").checked){ itens.push("Bolo"); total+=3.5; }
    if(document.getElementById("pastel").checked){ itens.push("Pastel"); total+=3; }
    if(document.getElementById("torta").checked){ itens.push("Torta"); total+=4; }
    if(itens.length === 0){
      document.getElementById("resultadoConsumo").textContent = `${nome} não consumiu nada.`;
      return;
    }
    document.getElementById("resultadoConsumo").textContent = 
      `${nome} consumiu: ${itens.join(", ")} | Total: R$ ${total.toFixed(2)}`;
  }

  // Questão 4 - Quiz (corrigido e com mais opções)
  function corrigirQuiz(){
    const respostas = {q1:"Brasília", q2:"4", q3:"CSS"};
    const form = document.getElementById("quizForm");
    let pontos = 0;
    let resultado = "";

    for(let q in respostas){
      const elements = form.elements[q];
      let marcada = null;
      if(elements){
        // elements pode ser RadioNodeList
        for(let i=0;i<elements.length;i++){
          if(elements[i].checked){ marcada = elements[i].value; break; }
        }
        // fallback
        if(marcada === null && elements.value) marcada = elements.value;
      }

      if(marcada === null){
        resultado += `⚪ ${q} sem resposta<br>`;
      } else if(marcada === respostas[q]){
        pontos++;
        resultado += `✔ ${q} correta<br>`;
      } else {
        resultado += `✘ ${q} errada (marcada: ${marcada})<br>`;
      }
    }

    resultado += `Pontuação final: ${pontos}/3<br>`;
    resultado += pontos===3?"Excelente!":"Continue estudando!";
    document.getElementById("resultadoQuiz").innerHTML = resultado;
  }

  // Questão 5
  function adicionarTarefa(){
    let tarefa = document.getElementById("tarefaInput").value.trim();
    if(!tarefa){ alert("Digite uma tarefa!"); return; }
    let li = document.createElement("li");
    li.className="list-group-item d-flex justify-content-between align-items-center";
    li.innerHTML = `<span>${tarefa}</span>
                    <div>
                      <button class="btn btn-sm btn-success me-1" onclick="this.parentElement.parentElement.querySelector('span').style.textDecoration='line-through'">Concluir</button>
                      <button class="btn btn-sm btn-danger" onclick="this.parentElement.parentElement.remove()">Remover</button>
                    </div>`;
    document.getElementById("listaTarefas").appendChild(li);
    document.getElementById("tarefaInput").value="";
  }
</script>

</body>
</html>
